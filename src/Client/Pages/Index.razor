@page "/"

@using InterviewApp.Client.Components.ControlToolbar
@using InterviewApp.Client.Components.ExpansionList
@using InterviewApp.Client.Components.Header
@using InterviewApp.Client.Enums
@using InterviewApp.Shared.Models

<AppMainHeader Title="Inteview App"
               OnSearch="s => Search(s)"
               OnSearchText="s => Search(s)"
               OnSearchValue="v => Search(v)"
               OnSwitchTheme="SwitchTheme"
               OnOpenReport="OpenReportDialog"
               OnResetQuestions="() => OpenResetDialog()" />

<MudContainer MaxWidth="MaxWidth.Medium">
    <MudContainer Fixed="true">
        <MudGrid>
            <MudItem xs="12" Class="pt-12">
                @if (_interviewService is not null && _interviewService.IsInitialized())
                {
                    <AppExpansionList Title="Pinned questions"
                                      InterviewQuestions="_interviewService.InterviewQuestionLists[InterviewQuestionListType.FILTERED].Where(x => x.IsPinned ?? false).ToList()"
                                      OnTogglePin="TogglePin"
                                      OnOpenNoteDialog="OpenNoteDialog"
                                      OnOpenResetDialog="OpenResetDialog"
                                      OnRatingChanged="RatingChanged" />

                    <AppExpansionList Title="All questions"
                                      InterviewQuestions="_interviewService.InterviewQuestionLists[InterviewQuestionListType.FILTERED].ToList()"
                                      OnTogglePin="TogglePin"
                                      OnOpenNoteDialog="OpenNoteDialog"
                                      OnOpenResetDialog="OpenResetDialog"
                                      OnRatingChanged="RatingChanged" />
                }
                else
                {
                    <AppExpansionList IsSkeleton="true" />
                }
            </MudItem>
        </MudGrid>
    </MudContainer>
</MudContainer>