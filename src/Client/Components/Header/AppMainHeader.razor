@using InterviewApp.Shared.Models

<MudAppBar Color="Color.Primary">
    <MudIcon Class="d-none d-sm-flex" Icon="@Icons.Material.Filled.PersonSearch" />
    <MudText Class="ml-2 d-none d-sm-flex" 
             Typo="Typo.h6">@Title</MudText>

    <MudSpacer />
    <MudAutocomplete Class="search-input" 
                     PopoverClass="remove-primary-color"
                     T="InterviewQuestion"
                     Immediate="true" 
                     Placeholder="Search"
                     SearchFunc="Search"
                     ToStringFunc="e => e.Title"
                     TextChanged="SearchText"
                     MinCharacters="1"
                     CoerceText="false"
                     CoerceValue="false"
                     FullWidth="true"
                     InputMode="InputMode.search"
                     MaxItems="5"                     
                     ResetValueOnEmptyText="true"
                     Clearable="true" 
                     Dense="true" 
                     DisableUnderLine="true"
                     Variant="Variant.Outlined" 
                     AdornmentIcon="@Icons.Material.Filled.Search">

                     <ItemTemplate Context="e">
                         @if (e is not null) 
                         {
                            <MudText Typo="Typo.body2">@e.Title (@e.Category)</MudText>
                            <MudText Typo="Typo.caption" Align="Align.Justify">@e.Content?.Substring(0, 100)...</MudText>
                         }
                     </ItemTemplate>

    </MudAutocomplete>
    <MudSpacer />

    <MudIconButton Class="appbar-btn-icon pr-2 pl-5" OnClick="() => OpenReport()" Icon="@Icons.Material.Filled.AssistantPhoto" />
    <MudMenu Class="appbar-btn-icon setting-menu" Icon="@Icons.Material.Filled.Settings" Dense="true" Direction="Direction.Right" OffsetY="true">
        <MudMenuItem OnClick="() => ResetQuestions()">Reset</MudMenuItem>
        <MudMenuItem OnClick="() => OpenSettings()">Settings</MudMenuItem>
        <MudMenuItem OnClick="() => SwitchTheme()">Switch theme</MudMenuItem>
    </MudMenu>
</MudAppBar>
